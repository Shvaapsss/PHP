
# Отчет по лабораторной работе: Веб-приложение с аутентификацией пользователей

## Содержание

1. [Описание лабораторной работы](#описание-лабораторной-работы)
2. [Технические требования](#технические-требования)
3. [Инструкции по запуску](#инструкции-по-запуску)
4. [Документация проекта](#документация-проекта)
5. [Функциональные возможности](#функциональные-возможности)
6. [Сценарии взаимодействия пользователей с приложением](#сценарии-взаимодействия-пользователей-с-приложением)
7. [Структура базы данных](#структура-базы-данных)
8. [Примеры использования проекта](#примеры-использования-проекта)
9. [Ответы на контрольные вопросы](#ответы-на-контрольные-вопросы)
10. [Список использованных источников](#список-использованных-источников)

## Описание лабораторной работы

В рамках данной лабораторной работы было разработано веб-приложение с использованием PHP и MySQL, включающее механизм аутентификации пользователей, защищенные компоненты, формы создания ресурса и поиска, а также админ-панель для управления пользователями.

Основной функционал включает:
- Регистрация и аутентификация пользователей.
- Доступ к защищенным разделам сайта только после успешной аутентификации.
- Реализация формы создания ресурса с множеством полей и проверки данных.
- Возможность поиска по данным.
- Роль администратора для управления пользователями и данными.

## Технические требования

- Веб-приложение должно быть разработано с использованием PHP и MySQL.
- Для хранения паролей пользователей используется хэширование с помощью `password_hash`.
- Все взаимодействия с пользователем через формы должны проходить проверку как на клиенте, так и на сервере.
- Для реализации архитектуры используется паттерн MVC.

## Инструкции по запуску

1. Клонируйте репозиторий:
    ```
    git clone <ссылка на репозиторий>
    ```

2. Установите все необходимые зависимости (например, для PHP):
    ```
    composer install
    ```

3. Настройте базу данных:
    - Создайте базу данных `webapp` в MySQL.
    - Импортируйте SQL-дамп для создания таблиц пользователей и данных.

4. Запустите сервер PHP:
    ```
    php -S localhost:8000
    ```

5. Откройте в браузере [http://localhost:8000](http://localhost:8000).

## Документация проекта

### Функциональные возможности

1. **Аутентификация пользователей**
    - Механизм регистрации и входа в систему.
    - Пароли хранятся в базе данных с использованием безопасных хэш-функций.
    - Реализована система восстановления пароля через электронную почту.

2. **Общедоступный компонент**
    - Доступный всем пользователям без необходимости авторизации.
    - Данные отображаются динамически с использованием серверных скриптов.

3. **Формы взаимодействия с пользователем**
    - Форма создания ресурса с пятью полями.
    - Форма поиска для нахождения записей по заданным критериям.

4. **Защищённый компонент**
    - Доступен только для авторизованных пользователей.
    - Роль администратора с дополнительными правами: создание и управление учётными записями.

### Сценарии взаимодействия пользователей с приложением

1. **Регистрация**
    - Пользователь вводит логин и пароль, которые сохраняются в базе данных в зашифрованном виде.
    - Пароль хэшируется с помощью функции `password_hash` для обеспечения безопасности.

2. **Вход в систему**
    - Пользователь вводит логин и пароль, которые проверяются с помощью `password_verify`.
    - В случае успеха пользователю предоставляется доступ к защищённым разделам.

3. **Создание ресурса**
    - Пользователь заполняет форму с пятью полями (например, текстовые поля, переключатели, выпадающие списки).
    - Данные проходят проверку на стороне клиента (JavaScript) и на стороне сервера (PHP).

4. **Поиск**
    - Пользователь может искать ресурсы по ключевым словам, с использованием SQL-запросов с фильтрацией данных.

5. **Административные функции**
    - Администратор может создавать новые учётные записи, редактировать и удалять пользователей.

### Структура базы данных

База данных содержит следующие таблицы:
1. **users**
    - id (int, primary key)
    - username (varchar, unique)
    - password (varchar)
    - role (varchar, default 'user')

2. **resources**
    - id (int, primary key)
    - name (varchar)
    - description (text)

Пример SQL для создания таблицы пользователей:
```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(50) DEFAULT 'user'
);
```

Пример SQL для создания таблицы ресурсов:
```sql
CREATE TABLE resources (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT
);
```

### Примеры использования проекта

Пример кода для регистрации пользователя:
```php
<?php
// Получаем данные формы
$username = $_POST['username'];
$password = $_POST['password'];

// Хэшируем пароль перед сохранением в базе данных
$hashed_password = password_hash($password, PASSWORD_DEFAULT);

// Сохраняем пользователя в базе данных
$sql = "INSERT INTO users (username, password) VALUES ('$username', '$hashed_password')";
mysqli_query($conn, $sql);
?>
```

Пример кода для проверки логина:
```php
<?php
// Получаем данные формы
$username = $_POST['username'];
$password = $_POST['password'];

// Проверяем, существует ли пользователь в базе данных
$sql = "SELECT * FROM users WHERE username = '$username'";
$result = mysqli_query($conn, $sql);
$user = mysqli_fetch_assoc($result);

// Если пользователь найден, проверяем пароль
if (password_verify($password, $user['password'])) {
    echo "Добро пожаловать!";
} else {
    echo "Неверный логин или пароль.";
}
?>
```

### Ответы на контрольные вопросы

1. **Почему пароли хранятся в базе данных с использованием хэширования?**
    - Хэширование паролей предотвращает утечку реальных паролей в случае взлома базы данных. Используя алгоритм хэширования, мы преобразуем пароль в строку, которая не может быть восстановлена обратно в исходный пароль.

2. **Как обеспечивается безопасность данных пользователей?**
    - Использование HTTPS для защиты данных при передаче.
    - Хэширование паролей с использованием функции `password_hash`.
    - Валидация данных на стороне клиента и сервера для предотвращения внедрения вредоносного кода.

3. **Как реализована система восстановления пароля?**
    - Пользователь может запросить восстановление пароля через форму, после чего на его почту будет отправлено письмо с уникальной ссылкой для сброса пароля.

### Список использованных источников

1. [PHP Documentation](https://www.php.net/)
2. [MySQL Documentation](https://dev.mysql.com/doc/)
3. [OWASP Best Practices for Password Storage](https://owasp.org/www-project-cheat-sheets/)

